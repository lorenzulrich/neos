/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(1);


/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./Resources/Public/JavaScript/Components/TopBar/DropdownMenu.js
class DropDownMenu {
  constructor(_root) {
    this._root = _root;
    this._button = this._root.querySelectorAll('.neos-dropdown-toggle');
    this._menu = this._root.querySelectorAll('.neos-dropdown-menu');

    this._setupEventListeners();
  }

  _setupEventListeners() {
    this._button.forEach(_toggleButton => {
      _toggleButton.addEventListener('click', this._toggle.bind(this));
    });
  }

  _toggle(_event) {
    this._changeToogleIcon();

    this._root.classList.toggle('neos-dropdown-open');
  }

  _changeToogleIcon() {
    const openIcon = this._root.querySelector('.fa-chevron-down');

    const closeIcon = this._root.querySelector('.fa-chevron-up');

    if (openIcon) {
      openIcon.classList.replace('fa-chevron-down', 'fa-chevron-up');
    }

    if (closeIcon) {
      closeIcon.classList.replace('fa-chevron-up', 'fa-chevron-down');
    }
  }

}
// CONCATENATED MODULE: ./Resources/Public/JavaScript/Components/TopBar/Expandable.js
class Expandable {
  constructor(_root, _triggerClassName, _onStateChange, initialState) {
    this._root = _root;
    this._trigger = this._root.querySelectorAll(_triggerClassName);
    this._onStateChange = _onStateChange;

    this._setupEventListeners();

    this._initialize(initialState);
  }

  _setupEventListeners() {
    this._trigger.forEach(_toggleButton => {
      _toggleButton.addEventListener('click', this._toggle.bind(this));
    });
  }

  _initialize(initialState) {
    const header = this._root.querySelector('[aria-expanded]');

    header.setAttribute('aria-expanded', String(initialState));

    if (initialState) {
      // default is closed
      this._root.classList.add('neos-open');

      this._changeToogleIcon();
    }
  }

  _toggle() {
    this._changeToogleIcon();

    this._root.classList.toggle('neos-open');

    this._toogleAriaExpandable();
  }

  _toogleAriaExpandable() {
    const header = this._root.querySelector('[aria-expanded]');

    const expanded = this._root.classList.contains('neos-open');

    header.setAttribute('aria-expanded', String(expanded));

    if (typeof this._onStateChange === 'function') {
      const sectionName = this._root.getAttribute('data-key');

      this._onStateChange(sectionName, expanded);
    }
  }

  _changeToogleIcon() {
    const openIcon = this._root.querySelector('.fa-chevron-circle-down');

    const closeIcon = this._root.querySelector('.fa-chevron-circle-up');

    if (openIcon) {
      openIcon.classList.replace('fa-chevron-circle-down', 'fa-chevron-circle-up');
    }

    if (closeIcon) {
      closeIcon.classList.replace('fa-chevron-circle-up', 'fa-chevron-circle-down');
    }
  }

}
// CONCATENATED MODULE: ./Resources/Public/JavaScript/Helper/isNil.js
const isNil = value => value === null || value === undefined;

/* harmony default export */ var Helper_isNil = (isNil);
// CONCATENATED MODULE: ./Resources/Public/JavaScript/Helper/isEmpty.js


const isEmpty = object => {
  if (Helper_isNil(object)) {
    return false;
  }

  return !Object.getOwnPropertySymbols(object).length && !Object.getOwnPropertyNames(object).length;
};

/* harmony default export */ var Helper_isEmpty = (isEmpty);
// CONCATENATED MODULE: ./Resources/Public/JavaScript/Helper/getItemByKeyValue.js


const getItemByKeyValue = (collection, key, value) => {
  if (Helper_isNil(collection)) {
    return null;
  }

  return collection.find(object => object[key] === value);
};

/* harmony default export */ var Helper_getItemByKeyValue = (getItemByKeyValue);
// CONCATENATED MODULE: ./Resources/Public/JavaScript/Helper/getCollectionValueByPath.js


const getCollectionValueByPath = (collection, path) => {
  if (Helper_isNil(collection)) {
    return null;
  }

  return path.split('.').reduce((value, index) => {
    if (Helper_isNil(value)) {
      return null;
    }

    return value[index];
  }, collection);
};

/* harmony default export */ var Helper_getCollectionValueByPath = (getCollectionValueByPath);
// CONCATENATED MODULE: ./Resources/Public/JavaScript/Helper/createCollectionByPath.js
/**
 * The function can be used to create objects or change values by path.
 * So if you give an empty collection like {} with a path like a.b.c
 * and a value, you get and object {a: {b: {c: 'value' } } } as response.
 *
 * You can also pass thru the collection  {a: {b: {c: 'value' } } } and change
 * a.b.c to newValue. So you get  {a: {b: {c: 'newValue' } } }.
 *
 * If you use numerals as key we expect that the value should be an array
 * instead of an object.
 *
 * @param {object} collection
 * @param {string} path
 * @param {mixed} value
 * @return {object}
 */
const createCollectionByPath = (collection, path, value) => {
  collection = typeof collection === "object" ? collection : {};
  const keys = Array.isArray(path) ? path : path.split(".");
  let currentStep = collection;

  for (let i = 0; i < keys.length - 1; i++) {
    const key = keys[i];

    if (!currentStep[key] && !Object.prototype.hasOwnProperty.call(currentStep, key)) {
      const nextKey = keys[i + 1];
      const useArray = /^\+?(0|[1-9]\d*)$/.test(nextKey);
      currentStep[key] = useArray ? [] : {};
    }

    currentStep = currentStep[key];
  }

  const finalStep = keys[keys.length - 1];
  currentStep[finalStep] = value;
  return collection;
};

/* harmony default export */ var Helper_createCollectionByPath = (createCollectionByPath);
// CONCATENATED MODULE: ./Resources/Public/JavaScript/Helper/index.js






// CONCATENATED MODULE: ./Resources/Public/JavaScript/Services/Storage.js

const STORAGE_KEY = "persistedState";

const getStorage = () => {
  const storage = localStorage.getItem(STORAGE_KEY);
  const storageJson = JSON.parse(storage);
  return Helper_isNil(storageJson) ? {} : storageJson;
};

const loadStorageData = path => {
  const storage = getStorage();
  const storageData = Helper_getCollectionValueByPath(storage, path);
  return storageData;
};

const saveStorageData = (path, value) => {
  const storage = getStorage();
  const updatedStorageData = Helper_createCollectionByPath(storage, path, value);

  if (!Helper_isNil(updatedStorageData)) {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(updatedStorageData));
  }
};


// CONCATENATED MODULE: ./Resources/Public/JavaScript/Components/TopBar/MenuPanel.js


const VALUE_PATH = "ui.drawer.collapsedMenuGroups";
class MenuPanel_MenuPanel {
  constructor(_root) {
    this._root = _root;
    this._button = this._root.querySelectorAll(".neos-menu-button");
    this._panel = this._root.querySelectorAll(".neos-menu-panel");
    this._menuSectionStates = this._loadMenuSectionStates();

    this._setupEventListeners();

    if (this._panel) {
      this._initializeMenuSections();
    }
  }

  _initializeMenuSections() {
    this._panel.forEach(_panel => {
      const menuSectionElements = _panel.querySelectorAll(".neos-menu-section");

      const sections = this._menuSectionStates;
      menuSectionElements.forEach(menuSectionElement => {
        const sectionName = menuSectionElement.getAttribute("data-key");
        const sectionState = !sections.includes(sectionName);
        new Expandable(menuSectionElement, ".neos-menu-panel-toggle", this._onMenuSectionStateChange.bind(this), sectionState);
      });
    });
  }

  _setupEventListeners() {
    this._button.forEach(_toggleButton => {
      _toggleButton.addEventListener("click", this._toggle.bind(this));
    });
  }

  _loadMenuSectionStates() {
    const storageData = loadStorageData(VALUE_PATH, []);
    return Array.isArray(storageData) ? storageData : [];
  }

  _saveMenuSectionStates() {
    if (Array.isArray(this._menuSectionStates)) {
      saveStorageData(VALUE_PATH, this._menuSectionStates);
    }
  }

  _onMenuSectionStateChange(sectionName, newValue) {
    if (this._menuSectionStates.includes(sectionName) && newValue === true) {
      this._menuSectionStates = this._menuSectionStates.filter(item => item !== sectionName);
    }

    if (!this._menuSectionStates.includes(sectionName) && newValue === false) {
      this._menuSectionStates.push(sectionName);
    }

    this._saveMenuSectionStates();
  }

  _toggle(_event) {
    this._button.forEach(_toggleButton => {
      _toggleButton.classList.toggle("neos-pressed");
    });

    document.body.classList.toggle("neos-menu-panel-open");
  }

}
// CONCATENATED MODULE: ./Resources/Public/JavaScript/Components/TopBar/index.js




// CONCATENATED MODULE: ./Resources/Public/JavaScript/Components/Tree.js


const Tree_VALUE_PATH = "module.configuration";
class Tree_Tree {
  constructor(_root) {
    this._root = _root;
    this._type = this._root.getAttribute("data-type");
    this._treeBranchStates = this._loadTreeBranchStates(true);
    this._nodes = this._root.querySelectorAll(".neos-tree-node");

    this._initializeTree();

    this._setupEventListeners();
  }

  _initializeTree() {
    this._nodes.forEach(_node => {
      if (_node.firstChild.nodeName.toLowerCase() !== "ul") {
        this._wrapElementWithNodeTitle(_node.firstChild);
      }

      const hasSubnodes = _node.querySelectorAll(".neos-tree-node");

      if (this._isFolder(_node) && !Helper_isNil(hasSubnodes) && hasSubnodes.length > 0) {
        const expandIcon = this._createExpandIcon();

        _node.insertBefore(expandIcon, _node.firstChild);
      }
    });
  }

  _initializeTreeState(items) {
    if (!Array.isArray(items)) {
      return;
    }

    items.forEach(_item => {
      const node = this._root.querySelector(`[title="${_item}"`);

      if (!Helper_isNil(node)) {
        node.classList.add("neos-tree-open");
      }
    });
  }

  _setupEventListeners() {
    this._nodes.forEach(_node => {
      _node.addEventListener("click", this._onNodeClick.bind(this));
    });
  }

  _onNodeClick(event) {
    event.preventDefault();
    event.stopPropagation();
    const node = event.target.closest(".neos-tree-node");

    if (!Helper_isNil(node)) {
      this._deselectCurrentActiveNode();

      node.classList.toggle("neos-tree-active");
    }

    if (this._isFolder(node)) {
      this._toggle(node);
    }
  }

  _deselectCurrentActiveNode() {
    this._root.querySelectorAll(".neos-tree-active").forEach(_node => {
      _node.classList.remove("neos-tree-active");
    });
  }

  _createExpandIcon() {
    const expandIcon = document.createElement("span");
    expandIcon.classList.add("neos-tree-expander");
    return expandIcon;
  }

  _wrapElementWithNodeTitle(element) {
    const nodeTitle = document.createElement("span");
    nodeTitle.classList.add("neos-tree-title");
    element.parentNode.insertBefore(nodeTitle, element);
    nodeTitle.appendChild(element);
  }

  _isFolder(node) {
    return !Helper_isNil(node) && node.classList.contains("neos-tree-folder");
  }

  _toggle(node) {
    node.classList.toggle("neos-tree-open");

    this._changeTreeBranchState(node.getAttribute("title"), node.classList.contains("neos-tree-open"));
  }

  _getPathForType() {
    const path = Tree_VALUE_PATH + (!Helper_isEmpty(this._type) ? "." + this._type : "");
    return path.toLowerCase();
  }

  _loadTreeBranchStates(init) {
    const pathWithType = this._getPathForType();

    const storageData = loadStorageData(pathWithType, []);

    if (!Helper_isNil(init) && init === true) {
      this._initializeTreeState(storageData);
    }

    this._treeBranchStates = Array.isArray(storageData) ? storageData : [];
    return this._treeBranchStates;
  }

  _saveTreeBranchStates() {
    const pathWithType = this._getPathForType();

    if (Array.isArray(this._treeBranchStates)) {
      saveStorageData(pathWithType, this._treeBranchStates);
    }
  }

  _changeTreeBranchState(path) {
    if (Helper_isEmpty(path) || !Array.isArray(this._treeBranchStates)) {
      return;
    }

    if (this._treeBranchStates.includes(path)) {
      this._treeBranchStates = this._treeBranchStates.filter(item => item !== path);
    } else {
      this._treeBranchStates.push(path);
    }

    this._saveTreeBranchStates();
  }

}
// CONCATENATED MODULE: ./Resources/Public/JavaScript/index.js


const dropDownMenuElements = document.querySelectorAll('.neos-user-menu');
dropDownMenuElements.forEach(dropDownElement => {
  new DropDownMenu(dropDownElement);
});
const menuPanelElements = document.querySelectorAll('.neos-menu');
menuPanelElements.forEach(panelElement => {
  new MenuPanel_MenuPanel(panelElement);
});
const treeElements = document.querySelectorAll('.neos-tree-container');
treeElements.forEach(treeElement => {
  new Tree_Tree(treeElement);
});

/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vUmVzb3VyY2VzL1B1YmxpYy9KYXZhU2NyaXB0L0NvbXBvbmVudHMvVG9wQmFyL0Ryb3Bkb3duTWVudS5qcyIsIndlYnBhY2s6Ly8vLi9SZXNvdXJjZXMvUHVibGljL0phdmFTY3JpcHQvQ29tcG9uZW50cy9Ub3BCYXIvRXhwYW5kYWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9SZXNvdXJjZXMvUHVibGljL0phdmFTY3JpcHQvSGVscGVyL2lzTmlsLmpzIiwid2VicGFjazovLy8uL1Jlc291cmNlcy9QdWJsaWMvSmF2YVNjcmlwdC9IZWxwZXIvaXNFbXB0eS5qcyIsIndlYnBhY2s6Ly8vLi9SZXNvdXJjZXMvUHVibGljL0phdmFTY3JpcHQvSGVscGVyL2dldEl0ZW1CeUtleVZhbHVlLmpzIiwid2VicGFjazovLy8uL1Jlc291cmNlcy9QdWJsaWMvSmF2YVNjcmlwdC9IZWxwZXIvZ2V0Q29sbGVjdGlvblZhbHVlQnlQYXRoLmpzIiwid2VicGFjazovLy8uL1Jlc291cmNlcy9QdWJsaWMvSmF2YVNjcmlwdC9IZWxwZXIvY3JlYXRlQ29sbGVjdGlvbkJ5UGF0aC5qcyIsIndlYnBhY2s6Ly8vLi9SZXNvdXJjZXMvUHVibGljL0phdmFTY3JpcHQvSGVscGVyL2luZGV4LmpzIiwid2VicGFjazovLy8uL1Jlc291cmNlcy9QdWJsaWMvSmF2YVNjcmlwdC9TZXJ2aWNlcy9TdG9yYWdlLmpzIiwid2VicGFjazovLy8uL1Jlc291cmNlcy9QdWJsaWMvSmF2YVNjcmlwdC9Db21wb25lbnRzL1RvcEJhci9NZW51UGFuZWwuanMiLCJ3ZWJwYWNrOi8vLy4vUmVzb3VyY2VzL1B1YmxpYy9KYXZhU2NyaXB0L0NvbXBvbmVudHMvVG9wQmFyL2luZGV4LmpzIiwid2VicGFjazovLy8uL1Jlc291cmNlcy9QdWJsaWMvSmF2YVNjcmlwdC9Db21wb25lbnRzL1RyZWUuanMiLCJ3ZWJwYWNrOi8vLy4vUmVzb3VyY2VzL1B1YmxpYy9KYXZhU2NyaXB0L2luZGV4LmpzIl0sIm5hbWVzIjpbIkRyb3BEb3duTWVudSIsImNvbnN0cnVjdG9yIiwiX3Jvb3QiLCJfYnV0dG9uIiwicXVlcnlTZWxlY3RvckFsbCIsIl9tZW51IiwiX3NldHVwRXZlbnRMaXN0ZW5lcnMiLCJmb3JFYWNoIiwiX3RvZ2dsZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfdG9nZ2xlIiwiYmluZCIsIl9ldmVudCIsIl9jaGFuZ2VUb29nbGVJY29uIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwib3Blbkljb24iLCJxdWVyeVNlbGVjdG9yIiwiY2xvc2VJY29uIiwicmVwbGFjZSIsIkV4cGFuZGFibGUiLCJfdHJpZ2dlckNsYXNzTmFtZSIsIl9vblN0YXRlQ2hhbmdlIiwiaW5pdGlhbFN0YXRlIiwiX3RyaWdnZXIiLCJfaW5pdGlhbGl6ZSIsImhlYWRlciIsInNldEF0dHJpYnV0ZSIsIlN0cmluZyIsImFkZCIsIl90b29nbGVBcmlhRXhwYW5kYWJsZSIsImV4cGFuZGVkIiwiY29udGFpbnMiLCJzZWN0aW9uTmFtZSIsImdldEF0dHJpYnV0ZSIsImlzTmlsIiwidmFsdWUiLCJ1bmRlZmluZWQiLCJpc0VtcHR5Iiwib2JqZWN0IiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwibGVuZ3RoIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImdldEl0ZW1CeUtleVZhbHVlIiwiY29sbGVjdGlvbiIsImtleSIsImZpbmQiLCJnZXRDb2xsZWN0aW9uVmFsdWVCeVBhdGgiLCJwYXRoIiwic3BsaXQiLCJyZWR1Y2UiLCJpbmRleCIsImNyZWF0ZUNvbGxlY3Rpb25CeVBhdGgiLCJrZXlzIiwiQXJyYXkiLCJpc0FycmF5IiwiY3VycmVudFN0ZXAiLCJpIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwibmV4dEtleSIsInVzZUFycmF5IiwidGVzdCIsImZpbmFsU3RlcCIsIlNUT1JBR0VfS0VZIiwiZ2V0U3RvcmFnZSIsInN0b3JhZ2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic3RvcmFnZUpzb24iLCJKU09OIiwicGFyc2UiLCJsb2FkU3RvcmFnZURhdGEiLCJzdG9yYWdlRGF0YSIsInNhdmVTdG9yYWdlRGF0YSIsInVwZGF0ZWRTdG9yYWdlRGF0YSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJWQUxVRV9QQVRIIiwiTWVudVBhbmVsIiwiX3BhbmVsIiwiX21lbnVTZWN0aW9uU3RhdGVzIiwiX2xvYWRNZW51U2VjdGlvblN0YXRlcyIsIl9pbml0aWFsaXplTWVudVNlY3Rpb25zIiwibWVudVNlY3Rpb25FbGVtZW50cyIsInNlY3Rpb25zIiwibWVudVNlY3Rpb25FbGVtZW50Iiwic2VjdGlvblN0YXRlIiwiaW5jbHVkZXMiLCJfb25NZW51U2VjdGlvblN0YXRlQ2hhbmdlIiwiX3NhdmVNZW51U2VjdGlvblN0YXRlcyIsIm5ld1ZhbHVlIiwiZmlsdGVyIiwiaXRlbSIsInB1c2giLCJkb2N1bWVudCIsImJvZHkiLCJUcmVlIiwiX3R5cGUiLCJfdHJlZUJyYW5jaFN0YXRlcyIsIl9sb2FkVHJlZUJyYW5jaFN0YXRlcyIsIl9ub2RlcyIsIl9pbml0aWFsaXplVHJlZSIsIl9ub2RlIiwiZmlyc3RDaGlsZCIsIm5vZGVOYW1lIiwidG9Mb3dlckNhc2UiLCJfd3JhcEVsZW1lbnRXaXRoTm9kZVRpdGxlIiwiaGFzU3Vibm9kZXMiLCJfaXNGb2xkZXIiLCJleHBhbmRJY29uIiwiX2NyZWF0ZUV4cGFuZEljb24iLCJpbnNlcnRCZWZvcmUiLCJfaW5pdGlhbGl6ZVRyZWVTdGF0ZSIsIml0ZW1zIiwiX2l0ZW0iLCJub2RlIiwiX29uTm9kZUNsaWNrIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInRhcmdldCIsImNsb3Nlc3QiLCJfZGVzZWxlY3RDdXJyZW50QWN0aXZlTm9kZSIsInJlbW92ZSIsImNyZWF0ZUVsZW1lbnQiLCJlbGVtZW50Iiwibm9kZVRpdGxlIiwicGFyZW50Tm9kZSIsImFwcGVuZENoaWxkIiwiX2NoYW5nZVRyZWVCcmFuY2hTdGF0ZSIsIl9nZXRQYXRoRm9yVHlwZSIsImluaXQiLCJwYXRoV2l0aFR5cGUiLCJfc2F2ZVRyZWVCcmFuY2hTdGF0ZXMiLCJkcm9wRG93bk1lbnVFbGVtZW50cyIsImRyb3BEb3duRWxlbWVudCIsIm1lbnVQYW5lbEVsZW1lbnRzIiwicGFuZWxFbGVtZW50IiwidHJlZUVsZW1lbnRzIiwidHJlZUVsZW1lbnQiXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtEQUEwQyxnQ0FBZ0M7QUFDMUU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnRUFBd0Qsa0JBQWtCO0FBQzFFO0FBQ0EseURBQWlELGNBQWM7QUFDL0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUF5QyxpQ0FBaUM7QUFDMUUsd0hBQWdILG1CQUFtQixFQUFFO0FBQ3JJO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUNBQTJCLDBCQUEwQixFQUFFO0FBQ3ZELHlDQUFpQyxlQUFlO0FBQ2hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhEQUFzRCwrREFBK0Q7O0FBRXJIO0FBQ0E7OztBQUdBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2xGZSxNQUFNQSxZQUFOLENBQW1CO0FBQ2pDQyxhQUFXLENBQUNDLEtBQUQsRUFBUTtBQUNsQixTQUFLQSxLQUFMLEdBQWFBLEtBQWI7QUFDQSxTQUFLQyxPQUFMLEdBQWUsS0FBS0QsS0FBTCxDQUFXRSxnQkFBWCxDQUE0Qix1QkFBNUIsQ0FBZjtBQUNBLFNBQUtDLEtBQUwsR0FBYSxLQUFLSCxLQUFMLENBQVdFLGdCQUFYLENBQTRCLHFCQUE1QixD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aUIsQ0FBQ00sS0FBSyxDQUFDQyxPQUFOLENBQWMsS0FBSzZDLGlCQUFuQixDQUF0QixFQUE2RDtBQUM1RDtBQUNBOztBQUVELFFBQUksS0FBS0EsaUJBQUwsQ0FBdUJYLFFBQXZCLENBQWdDekMsSUFBaEMsQ0FBSixFQUEyQztBQUMxQyxXQUFLb0QsaUJBQUwsR0FBeUIsS0FBS0EsaUJBQUwsQ0FBdUJQLE1BQXZCLENBQ3hCQyxJQUFJLElBQUlBLElBQUksS0FBSzlDLElBRE8sQ0FBekI7QUFHQSxLQUpELE1BSU87QUFDTixXQUFLb0QsaUJBQUwsQ0FBdUJMLElBQXZCLENBQTRCL0MsSUFBNUI7QUFDQTs7QUFFRCxTQUFLdUYscUJBQUw7QUFDQTs7QUE1SHdCLEM7O0FDSjFCO0FBQ0E7QUFFQSxNQUFNQyxvQkFBb0IsR0FBR3hDLFFBQVEsQ0FBQzdGLGdCQUFULENBQTBCLGlCQUExQixDQUE3QjtBQUNBcUksb0JBQW9CLENBQUNsSSxPQUFyQixDQUE2Qm1JLGVBQWUsSUFBSTtBQUMvQyxNQUFJMUksWUFBSixDQUFpQjBJLGVBQWpCO0FBQ0EsQ0FGRDtBQUlBLE1BQU1DLGlCQUFpQixHQUFHMUMsUUFBUSxDQUFDN0YsZ0JBQVQsQ0FBMEIsWUFBMUIsQ0FBMUI7QUFDQXVJLGlCQUFpQixDQUFDcEksT0FBbEIsQ0FBMEJxSSxZQUFZLElBQUk7QUFDekMsTUFBSTNELG1CQUFKLENBQWMyRCxZQUFkO0FBQ0EsQ0FGRDtBQUlBLE1BQU1DLFlBQVksR0FBRzVDLFFBQVEsQ0FBQzdGLGdCQUFULENBQTBCLHNCQUExQixDQUFyQjtBQUNBeUksWUFBWSxDQUFDdEksT0FBYixDQUFxQnVJLFdBQVcsSUFBSTtBQUNuQyxNQUFJM0MsU0FBSixDQUFTMkMsV0FBVDtBQUNBLENBRkQsRSIsImZpbGUiOiJNYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIERyb3BEb3duTWVudSB7XG5cdGNvbnN0cnVjdG9yKF9yb290KSB7XG5cdFx0dGhpcy5fcm9vdCA9IF9yb290O1xuXHRcdHRoaXMuX2J1dHRvbiA9IHRoaXMuX3Jvb3QucXVlcnlTZWxlY3RvckFsbCgnLm5lb3MtZHJvcGRvd24tdG9nZ2xlJyk7XG5cdFx0dGhpcy5fbWVudSA9IHRoaXMuX3Jvb3QucXVlcnlTZWxlY3RvckFsbCgnLm5lb3MtZHJvcGRvd24tbWVudScpO1xuXHRcdHRoaXMuX3NldHVwRXZlbnRMaXN0ZW5lcnMoKTtcblx0fVxuXG5cdF9zZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xuXHRcdHRoaXMuX2J1dHRvbi5mb3JFYWNoKF90b2dnbGVCdXR0b24gPT4ge1xuXHRcdFx0X3RvZ2dsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX3RvZ2dsZS5iaW5kKHRoaXMpKTtcblx0XHR9KTtcblx0fVxuXG5cdF90b2dnbGUoX2V2ZW50KSB7XG5cdFx0dGhpcy5fY2hhbmdlVG9vZ2xlSWNvbigpO1xuXHRcdHRoaXMuX3Jvb3QuY2xhc3NMaXN0LnRvZ2dsZSgnbmVvcy1kcm9wZG93bi1vcGVuJyk7XG5cdH1cblxuXHRfY2hhbmdlVG9vZ2xlSWNvbigpIHtcblx0XHRjb25zdCBvcGVuSWNvbiA9IHRoaXMuX3Jvb3QucXVlcnlTZWxlY3RvcignLmZhLWNoZXZyb24tZG93bicpO1xuXHRcdGNvbnN0IGNsb3NlSWNvbiA9IHRoaXMuX3Jvb3QucXVlcnlTZWxlY3RvcignLmZhLWNoZXZyb24tdXAnKTtcblx0XHRpZiAob3Blbkljb24pIHtcblx0XHRcdG9wZW5JY29uLmNsYXNzTGlzdC5yZXBsYWNlKCdmYS1jaGV2cm9uLWRvd24nLCAnZmEtY2hldnJvbi11cCcpO1xuXHRcdH1cblx0XHRpZiAoY2xvc2VJY29uKSB7XG5cdFx0XHRjbG9zZUljb24uY2xhc3NMaXN0LnJlcGxhY2UoJ2ZhLWNoZXZyb24tdXAnLCAnZmEtY2hldnJvbi1kb3duJyk7XG5cdFx0fVxuXHR9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBFeHBhbmRhYmxlIHtcblx0Y29uc3RydWN0b3IoX3Jvb3QsIF90cmlnZ2VyQ2xhc3NOYW1lLCBfb25TdGF0ZUNoYW5nZSwgaW5pdGlhbFN0YXRlKSB7XG5cdFx0dGhpcy5fcm9vdCA9IF9yb290O1xuXHRcdHRoaXMuX3RyaWdnZXIgPSB0aGlzLl9yb290LnF1ZXJ5U2VsZWN0b3JBbGwoX3RyaWdnZXJDbGFzc05hbWUpO1xuXHRcdHRoaXMuX29uU3RhdGVDaGFuZ2UgPSBfb25TdGF0ZUNoYW5nZTtcblx0XHR0aGlzLl9zZXR1cEV2ZW50TGlzdGVuZXJzKCk7XG5cdFx0dGhpcy5faW5pdGlhbGl6ZShpbml0aWFsU3RhdGUpO1xuXHR9XG5cblx0X3NldHVwRXZlbnRMaXN0ZW5lcnMoKSB7XG5cdFx0dGhpcy5fdHJpZ2dlci5mb3JFYWNoKF90b2dnbGVCdXR0b24gPT4ge1xuXHRcdFx0X3RvZ2dsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX3RvZ2dsZS5iaW5kKHRoaXMpKTtcblx0XHR9KTtcblx0fVxuXG5cdF9pbml0aWFsaXplKGluaXRpYWxTdGF0ZSkge1xuXHRcdGNvbnN0IGhlYWRlciA9IHRoaXMuX3Jvb3QucXVlcnlTZWxlY3RvcignW2FyaWEtZXhwYW5kZWRdJyk7XG5cdFx0aGVhZGVyLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIFN0cmluZyhpbml0aWFsU3RhdGUpKTtcblxuXHRcdGlmIChpbml0aWFsU3RhdGUpIHtcblx0XHRcdC8vIGRlZmF1bHQgaXMgY2xvc2VkXG5cdFx0XHR0aGlzLl9yb290LmNsYXNzTGlzdC5hZGQoJ25lb3Mtb3BlbicpO1xuXHRcdFx0dGhpcy5fY2hhbmdlVG9vZ2xlSWNvbigpO1xuXHRcdH1cblx0fVxuXG5cdF90b2dnbGUoKSB7XG5cdFx0dGhpcy5fY2hhbmdlVG9vZ2xlSWNvbigpO1xuXHRcdHRoaXMuX3Jvb3QuY2xhc3NMaXN0LnRvZ2dsZSgnbmVvcy1vcGVuJyk7XG5cdFx0dGhpcy5fdG9vZ2xlQXJpYUV4cGFuZGFibGUoKTtcblx0fVxuXG5cdF90b29nbGVBcmlhRXhwYW5kYWJsZSgpIHtcblx0XHRjb25zdCBoZWFkZXIgPSB0aGlzLl9yb290LnF1ZXJ5U2VsZWN0b3IoJ1thcmlhLWV4cGFuZGVkXScpO1xuXHRcdGNvbnN0IGV4cGFuZGVkID0gdGhpcy5fcm9vdC5jbGFzc0xpc3QuY29udGFpbnMoJ25lb3Mtb3BlbicpO1xuXHRcdGhlYWRlci5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBTdHJpbmcoZXhwYW5kZWQpKTtcblx0XHRpZiAodHlwZW9mIHRoaXMuX29uU3RhdGVDaGFuZ2UgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdGNvbnN0IHNlY3Rpb25OYW1lID0gdGhpcy5fcm9vdC5nZXRBdHRyaWJ1dGUoJ2RhdGEta2V5Jyk7XG5cdFx0XHR0aGlzLl9vblN0YXRlQ2hhbmdlKHNlY3Rpb25OYW1lLCBleHBhbmRlZCk7XG5cdFx0fVxuXHR9XG5cblx0X2NoYW5nZVRvb2dsZUljb24oKSB7XG5cdFx0Y29uc3Qgb3Blbkljb24gPSB0aGlzLl9yb290LnF1ZXJ5U2VsZWN0b3IoJy5mYS1jaGV2cm9uLWNpcmNsZS1kb3duJyk7XG5cdFx0Y29uc3QgY2xvc2VJY29uID0gdGhpcy5fcm9vdC5xdWVyeVNlbGVjdG9yKCcuZmEtY2hldnJvbi1jaXJjbGUtdXAnKTtcblx0XHRpZiAob3Blbkljb24pIHtcblx0XHRcdG9wZW5JY29uLmNsYXNzTGlzdC5yZXBsYWNlKFxuXHRcdFx0XHQnZmEtY2hldnJvbi1jaXJjbGUtZG93bicsXG5cdFx0XHRcdCdmYS1jaGV2cm9uLWNpcmNsZS11cCdcblx0XHRcdCk7XG5cdFx0fVxuXHRcdGlmIChjbG9zZUljb24pIHtcblx0XHRcdGNsb3NlSWNvbi5jbGFzc0xpc3QucmVwbGFjZShcblx0XHRcdFx0J2ZhLWNoZXZyb24tY2lyY2xlLXVwJyxcblx0XHRcdFx0J2ZhLWNoZXZyb24tY2lyY2xlLWRvd24nXG5cdFx0XHQpO1xuXHRcdH1cblx0fVxufVxuIiwiY29uc3QgaXNOaWwgPSB2YWx1ZSA9PiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkO1xuXG5leHBvcnQgZGVmYXVsdCBpc05pbDtcbiIsImltcG9ydCBpc05pbCBmcm9tICcuL2lzTmlsJztcblxuY29uc3QgaXNFbXB0eSA9IG9iamVjdCA9PiB7XG5cdGlmIChpc05pbChvYmplY3QpKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0cmV0dXJuIChcblx0XHQhT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpLmxlbmd0aCAmJlxuXHRcdCFPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmplY3QpLmxlbmd0aFxuXHQpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgaXNFbXB0eTtcbiIsImltcG9ydCB7IGlzTmlsIH0gZnJvbSAnLic7XG5cbmNvbnN0IGdldEl0ZW1CeUtleVZhbHVlID0gKGNvbGxlY3Rpb24sIGtleSwgdmFsdWUpID0+IHtcblx0aWYgKGlzTmlsKGNvbGxlY3Rpb24pKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblx0cmV0dXJuIGNvbGxlY3Rpb24uZmluZChvYmplY3QgPT4gb2JqZWN0W2tleV0gPT09IHZhbHVlKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGdldEl0ZW1CeUtleVZhbHVlO1xuIiwiaW1wb3J0IHsgaXNOaWwgfSBmcm9tICcuJztcblxuY29uc3QgZ2V0Q29sbGVjdGlvblZhbHVlQnlQYXRoID0gKGNvbGxlY3Rpb24sIHBhdGgpID0+IHtcblx0aWYgKGlzTmlsKGNvbGxlY3Rpb24pKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHRyZXR1cm4gcGF0aC5zcGxpdCgnLicpLnJlZHVjZSgodmFsdWUsIGluZGV4KSA9PiB7XG5cdFx0aWYgKGlzTmlsKHZhbHVlKSkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdHJldHVybiB2YWx1ZVtpbmRleF07XG5cdH0sIGNvbGxlY3Rpb24pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZ2V0Q29sbGVjdGlvblZhbHVlQnlQYXRoO1xuIiwiLyoqXG4gKiBUaGUgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gY3JlYXRlIG9iamVjdHMgb3IgY2hhbmdlIHZhbHVlcyBieSBwYXRoLlxuICogU28gaWYgeW91IGdpdmUgYW4gZW1wdHkgY29sbGVjdGlvbiBsaWtlIHt9IHdpdGggYSBwYXRoIGxpa2UgYS5iLmNcbiAqIGFuZCBhIHZhbHVlLCB5b3UgZ2V0IGFuZCBvYmplY3Qge2E6IHtiOiB7YzogJ3ZhbHVlJyB9IH0gfSBhcyByZXNwb25zZS5cbiAqXG4gKiBZb3UgY2FuIGFsc28gcGFzcyB0aHJ1IHRoZSBjb2xsZWN0aW9uICB7YToge2I6IHtjOiAndmFsdWUnIH0gfSB9IGFuZCBjaGFuZ2VcbiAqIGEuYi5jIHRvIG5ld1ZhbHVlLiBTbyB5b3UgZ2V0ICB7YToge2I6IHtjOiAnbmV3VmFsdWUnIH0gfSB9LlxuICpcbiAqIElmIHlvdSB1c2UgbnVtZXJhbHMgYXMga2V5IHdlIGV4cGVjdCB0aGF0IHRoZSB2YWx1ZSBzaG91bGQgYmUgYW4gYXJyYXlcbiAqIGluc3RlYWQgb2YgYW4gb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBjb2xsZWN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aFxuICogQHBhcmFtIHttaXhlZH0gdmFsdWVcbiAqIEByZXR1cm4ge29iamVjdH1cbiAqL1xuY29uc3QgY3JlYXRlQ29sbGVjdGlvbkJ5UGF0aCA9IChjb2xsZWN0aW9uLCBwYXRoLCB2YWx1ZSkgPT4ge1xuXHRjb2xsZWN0aW9uID0gdHlwZW9mIGNvbGxlY3Rpb24gPT09IFwib2JqZWN0XCIgPyBjb2xsZWN0aW9uIDoge307XG5cdGNvbnN0IGtleXMgPSBBcnJheS5pc0FycmF5KHBhdGgpID8gcGF0aCA6IHBhdGguc3BsaXQoXCIuXCIpO1xuXHRsZXQgY3VycmVudFN0ZXAgPSBjb2xsZWN0aW9uO1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoIC0gMTsgaSsrKSB7XG5cdFx0Y29uc3Qga2V5ID0ga2V5c1tpXTtcblx0XHRpZiAoXG5cdFx0XHQhY3VycmVudFN0ZXBba2V5XSAmJlxuXHRcdFx0IU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjdXJyZW50U3RlcCwga2V5KVxuXHRcdCkge1xuXHRcdFx0Y29uc3QgbmV4dEtleSA9IGtleXNbaSArIDFdO1xuXHRcdFx0Y29uc3QgdXNlQXJyYXkgPSAvXlxcKz8oMHxbMS05XVxcZCopJC8udGVzdChuZXh0S2V5KTtcblx0XHRcdGN1cnJlbnRTdGVwW2tleV0gPSB1c2VBcnJheSA/IFtdIDoge307XG5cdFx0fVxuXHRcdGN1cnJlbnRTdGVwID0gY3VycmVudFN0ZXBba2V5XTtcblx0fVxuXHRjb25zdCBmaW5hbFN0ZXAgPSBrZXlzW2tleXMubGVuZ3RoIC0gMV07XG5cdGN1cnJlbnRTdGVwW2ZpbmFsU3RlcF0gPSB2YWx1ZTtcblxuXHRyZXR1cm4gY29sbGVjdGlvbjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUNvbGxlY3Rpb25CeVBhdGg7XG4iLCJpbXBvcnQgaXNOaWwgZnJvbSAnLi9pc05pbCc7XG5pbXBvcnQgaXNFbXB0eSBmcm9tICcuL2lzRW1wdHknO1xuaW1wb3J0IGdldEl0ZW1CeUtleVZhbHVlIGZyb20gJy4vZ2V0SXRlbUJ5S2V5VmFsdWUnO1xuaW1wb3J0IGdldENvbGxlY3Rpb25WYWx1ZUJ5UGF0aCBmcm9tICcuL2dldENvbGxlY3Rpb25WYWx1ZUJ5UGF0aCc7XG5pbXBvcnQgY3JlYXRlQ29sbGVjdGlvbkJ5UGF0aCBmcm9tICcuL2NyZWF0ZUNvbGxlY3Rpb25CeVBhdGgnO1xuXG5leHBvcnQge1xuXHRpc05pbCxcblx0aXNFbXB0eSxcblx0Z2V0SXRlbUJ5S2V5VmFsdWUsXG5cdGdldENvbGxlY3Rpb25WYWx1ZUJ5UGF0aCxcblx0Y3JlYXRlQ29sbGVjdGlvbkJ5UGF0aFxufTtcbiIsImltcG9ydCB7XG5cdGlzTmlsLFxuXHRnZXRDb2xsZWN0aW9uVmFsdWVCeVBhdGgsXG5cdGNyZWF0ZUNvbGxlY3Rpb25CeVBhdGhcbn0gZnJvbSBcIi4uL0hlbHBlclwiO1xuXG5jb25zdCBTVE9SQUdFX0tFWSA9IFwicGVyc2lzdGVkU3RhdGVcIjtcblxuY29uc3QgZ2V0U3RvcmFnZSA9ICgpID0+IHtcblx0Y29uc3Qgc3RvcmFnZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfS0VZKTtcblx0Y29uc3Qgc3RvcmFnZUpzb24gPSBKU09OLnBhcnNlKHN0b3JhZ2UpO1xuXHRyZXR1cm4gaXNOaWwoc3RvcmFnZUpzb24pID8ge30gOiBzdG9yYWdlSnNvbjtcbn07XG5cbmNvbnN0IGxvYWRTdG9yYWdlRGF0YSA9IChwYXRoKSA9PiB7XG5cdGNvbnN0IHN0b3JhZ2UgPSBnZXRTdG9yYWdlKCk7XG5cdGNvbnN0IHN0b3JhZ2VEYXRhID0gZ2V0Q29sbGVjdGlvblZhbHVlQnlQYXRoKHN0b3JhZ2UsIHBhdGgpO1xuXHRyZXR1cm4gc3RvcmFnZURhdGE7XG59O1xuXG5jb25zdCBzYXZlU3RvcmFnZURhdGEgPSAocGF0aCwgdmFsdWUpID0+IHtcblx0Y29uc3Qgc3RvcmFnZSA9IGdldFN0b3JhZ2UoKTtcblx0Y29uc3QgdXBkYXRlZFN0b3JhZ2VEYXRhID0gY3JlYXRlQ29sbGVjdGlvbkJ5UGF0aChzdG9yYWdlLCBwYXRoLCB2YWx1ZSk7XG5cdGlmICghaXNOaWwodXBkYXRlZFN0b3JhZ2VEYXRhKSkge1xuXHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeSh1cGRhdGVkU3RvcmFnZURhdGEpKTtcblx0fVxufVxuXG5leHBvcnQgeyBsb2FkU3RvcmFnZURhdGEsIHNhdmVTdG9yYWdlRGF0YSB9O1xuIiwiaW1wb3J0IEV4cGFuZGFibGUgZnJvbSBcIi4vRXhwYW5kYWJsZVwiO1xuaW1wb3J0IHsgbG9hZFN0b3JhZ2VEYXRhLCBzYXZlU3RvcmFnZURhdGEgfSBmcm9tIFwiLi4vLi4vU2VydmljZXMvU3RvcmFnZVwiO1xuXG5jb25zdCBWQUxVRV9QQVRIID0gXCJ1aS5kcmF3ZXIuY29sbGFwc2VkTWVudUdyb3Vwc1wiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWVudVBhbmVsIHtcblx0Y29uc3RydWN0b3IoX3Jvb3QpIHtcblx0XHR0aGlzLl9yb290ID0gX3Jvb3Q7XG5cdFx0dGhpcy5fYnV0dG9uID0gdGhpcy5fcm9vdC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5lb3MtbWVudS1idXR0b25cIik7XG5cdFx0dGhpcy5fcGFuZWwgPSB0aGlzLl9yb290LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmVvcy1tZW51LXBhbmVsXCIpO1xuXHRcdHRoaXMuX21lbnVTZWN0aW9uU3RhdGVzID0gdGhpcy5fbG9hZE1lbnVTZWN0aW9uU3RhdGVzKCk7XG5cdFx0dGhpcy5fc2V0dXBFdmVudExpc3RlbmVycygpO1xuXG5cdFx0aWYgKHRoaXMuX3BhbmVsKSB7XG5cdFx0XHR0aGlzLl9pbml0aWFsaXplTWVudVNlY3Rpb25zKCk7XG5cdFx0fVxuXHR9XG5cblx0X2luaXRpYWxpemVNZW51U2VjdGlvbnMoKSB7XG5cdFx0dGhpcy5fcGFuZWwuZm9yRWFjaChfcGFuZWwgPT4ge1xuXHRcdFx0Y29uc3QgbWVudVNlY3Rpb25FbGVtZW50cyA9IF9wYW5lbC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5lb3MtbWVudS1zZWN0aW9uXCIpO1xuXHRcdFx0Y29uc3Qgc2VjdGlvbnMgPSB0aGlzLl9tZW51U2VjdGlvblN0YXRlcztcblx0XHRcdG1lbnVTZWN0aW9uRWxlbWVudHMuZm9yRWFjaChtZW51U2VjdGlvbkVsZW1lbnQgPT4ge1xuXHRcdFx0XHRjb25zdCBzZWN0aW9uTmFtZSA9IG1lbnVTZWN0aW9uRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWtleVwiKTtcblx0XHRcdFx0Y29uc3Qgc2VjdGlvblN0YXRlID0gIXNlY3Rpb25zLmluY2x1ZGVzKHNlY3Rpb25OYW1lKTtcblx0XHRcdFx0bmV3IEV4cGFuZGFibGUoXG5cdFx0XHRcdFx0bWVudVNlY3Rpb25FbGVtZW50LFxuXHRcdFx0XHRcdFwiLm5lb3MtbWVudS1wYW5lbC10b2dnbGVcIixcblx0XHRcdFx0XHR0aGlzLl9vbk1lbnVTZWN0aW9uU3RhdGVDaGFuZ2UuYmluZCh0aGlzKSxcblx0XHRcdFx0XHRzZWN0aW9uU3RhdGVcblx0XHRcdFx0KTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0X3NldHVwRXZlbnRMaXN0ZW5lcnMoKSB7XG5cdFx0dGhpcy5fYnV0dG9uLmZvckVhY2goX3RvZ2dsZUJ1dHRvbiA9PiB7XG5cdFx0XHRfdG9nZ2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl90b2dnbGUuYmluZCh0aGlzKSk7XG5cdFx0fSk7XG5cdH1cblxuXHRfbG9hZE1lbnVTZWN0aW9uU3RhdGVzKCkge1xuXHRcdGNvbnN0IHN0b3JhZ2VEYXRhID0gbG9hZFN0b3JhZ2VEYXRhKFZBTFVFX1BBVEgsIFtdKTtcblx0XHRyZXR1cm4gQXJyYXkuaXNBcnJheShzdG9yYWdlRGF0YSkgPyBzdG9yYWdlRGF0YSA6IFtdO1xuXHR9XG5cblx0X3NhdmVNZW51U2VjdGlvblN0YXRlcygpIHtcblx0XHRpZiAoQXJyYXkuaXNBcnJheSh0aGlzLl9tZW51U2VjdGlvblN0YXRlcykpIHtcblx0XHRcdHNhdmVTdG9yYWdlRGF0YShWQUxVRV9QQVRILCB0aGlzLl9tZW51U2VjdGlvblN0YXRlcyk7XG5cdFx0fVxuXHR9XG5cblx0X29uTWVudVNlY3Rpb25TdGF0ZUNoYW5nZShzZWN0aW9uTmFtZSwgbmV3VmFsdWUpIHtcblx0XHRpZiAodGhpcy5fbWVudVNlY3Rpb25TdGF0ZXMuaW5jbHVkZXMoc2VjdGlvbk5hbWUpICYmIG5ld1ZhbHVlID09PSB0cnVlKSB7XG5cdFx0XHR0aGlzLl9tZW51U2VjdGlvblN0YXRlcyA9IHRoaXMuX21lbnVTZWN0aW9uU3RhdGVzLmZpbHRlcihcblx0XHRcdFx0aXRlbSA9PiBpdGVtICE9PSBzZWN0aW9uTmFtZVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRpZiAoIXRoaXMuX21lbnVTZWN0aW9uU3RhdGVzLmluY2x1ZGVzKHNlY3Rpb25OYW1lKSAmJiBuZXdWYWx1ZSA9PT0gZmFsc2UpIHtcblx0XHRcdHRoaXMuX21lbnVTZWN0aW9uU3RhdGVzLnB1c2goc2VjdGlvbk5hbWUpO1xuXHRcdH1cblxuXHRcdHRoaXMuX3NhdmVNZW51U2VjdGlvblN0YXRlcygpO1xuXHR9XG5cblx0X3RvZ2dsZShfZXZlbnQpIHtcblx0XHR0aGlzLl9idXR0b24uZm9yRWFjaChfdG9nZ2xlQnV0dG9uID0+IHtcblx0XHRcdF90b2dnbGVCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcIm5lb3MtcHJlc3NlZFwiKTtcblx0XHR9KTtcblx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJuZW9zLW1lbnUtcGFuZWwtb3BlblwiKTtcblx0fVxufVxuIiwiaW1wb3J0IERyb3BEb3duTWVudSBmcm9tICcuL0Ryb3Bkb3duTWVudSdcbmltcG9ydCBFeHBhbmRhYmxlIGZyb20gJy4vRXhwYW5kYWJsZSdcbmltcG9ydCBNZW51UGFuZWwgZnJvbSAnLi9NZW51UGFuZWwnXG5cbmV4cG9ydCB7XG5cdERyb3BEb3duTWVudSxcblx0RXhwYW5kYWJsZSxcblx0TWVudVBhbmVsXG59XG4iLCJpbXBvcnQgeyBpc05pbCwgaXNFbXB0eSB9IGZyb20gXCIuLi9IZWxwZXJcIjtcbmltcG9ydCB7IGxvYWRTdG9yYWdlRGF0YSwgc2F2ZVN0b3JhZ2VEYXRhIH0gZnJvbSBcIi4uL1NlcnZpY2VzL1N0b3JhZ2VcIjtcblxuY29uc3QgVkFMVUVfUEFUSCA9IFwibW9kdWxlLmNvbmZpZ3VyYXRpb25cIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyZWUge1xuXHRjb25zdHJ1Y3Rvcihfcm9vdCkge1xuXHRcdHRoaXMuX3Jvb3QgPSBfcm9vdDtcblx0XHR0aGlzLl90eXBlID0gdGhpcy5fcm9vdC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR5cGVcIik7XG5cdFx0dGhpcy5fdHJlZUJyYW5jaFN0YXRlcyA9IHRoaXMuX2xvYWRUcmVlQnJhbmNoU3RhdGVzKHRydWUpO1xuXHRcdHRoaXMuX25vZGVzID0gdGhpcy5fcm9vdC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5lb3MtdHJlZS1ub2RlXCIpO1xuXHRcdHRoaXMuX2luaXRpYWxpemVUcmVlKCk7XG5cdFx0dGhpcy5fc2V0dXBFdmVudExpc3RlbmVycygpO1xuXHR9XG5cblx0X2luaXRpYWxpemVUcmVlKCkge1xuXHRcdHRoaXMuX25vZGVzLmZvckVhY2goX25vZGUgPT4ge1xuXHRcdFx0aWYgKF9ub2RlLmZpcnN0Q2hpbGQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJ1bFwiKSB7XG5cdFx0XHRcdHRoaXMuX3dyYXBFbGVtZW50V2l0aE5vZGVUaXRsZShfbm9kZS5maXJzdENoaWxkKTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGhhc1N1Ym5vZGVzID0gX25vZGUucXVlcnlTZWxlY3RvckFsbChcIi5uZW9zLXRyZWUtbm9kZVwiKTtcblx0XHRcdGlmICh0aGlzLl9pc0ZvbGRlcihfbm9kZSkgJiYgIWlzTmlsKGhhc1N1Ym5vZGVzKSAmJiBoYXNTdWJub2Rlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IGV4cGFuZEljb24gPSB0aGlzLl9jcmVhdGVFeHBhbmRJY29uKCk7XG5cdFx0XHRcdF9ub2RlLmluc2VydEJlZm9yZShleHBhbmRJY29uLCBfbm9kZS5maXJzdENoaWxkKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdF9pbml0aWFsaXplVHJlZVN0YXRlKGl0ZW1zKSB7XG5cdFx0aWYgKCFBcnJheS5pc0FycmF5KGl0ZW1zKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGl0ZW1zLmZvckVhY2goX2l0ZW0gPT4ge1xuXHRcdFx0Y29uc3Qgbm9kZSA9IHRoaXMuX3Jvb3QucXVlcnlTZWxlY3RvcihgW3RpdGxlPVwiJHtfaXRlbX1cImApO1xuXHRcdFx0aWYgKCFpc05pbChub2RlKSkge1xuXHRcdFx0XHRub2RlLmNsYXNzTGlzdC5hZGQoXCJuZW9zLXRyZWUtb3BlblwiKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdF9zZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xuXHRcdHRoaXMuX25vZGVzLmZvckVhY2goX25vZGUgPT4ge1xuXHRcdFx0X25vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX29uTm9kZUNsaWNrLmJpbmQodGhpcykpO1xuXHRcdH0pO1xuXHR9XG5cblx0X29uTm9kZUNsaWNrKGV2ZW50KSB7XG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRjb25zdCBub2RlID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIubmVvcy10cmVlLW5vZGVcIik7XG5cdFx0aWYgKCFpc05pbChub2RlKSkge1xuXHRcdFx0dGhpcy5fZGVzZWxlY3RDdXJyZW50QWN0aXZlTm9kZSgpO1xuXHRcdFx0bm9kZS5jbGFzc0xpc3QudG9nZ2xlKFwibmVvcy10cmVlLWFjdGl2ZVwiKTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5faXNGb2xkZXIobm9kZSkpIHtcblx0XHRcdHRoaXMuX3RvZ2dsZShub2RlKTtcblx0XHR9XG5cdH1cblxuXHRfZGVzZWxlY3RDdXJyZW50QWN0aXZlTm9kZSgpIHtcblx0XHR0aGlzLl9yb290LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmVvcy10cmVlLWFjdGl2ZVwiKS5mb3JFYWNoKF9ub2RlID0+IHtcblx0XHRcdF9ub2RlLmNsYXNzTGlzdC5yZW1vdmUoXCJuZW9zLXRyZWUtYWN0aXZlXCIpO1xuXHRcdH0pO1xuXHR9XG5cblx0X2NyZWF0ZUV4cGFuZEljb24oKSB7XG5cdFx0Y29uc3QgZXhwYW5kSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuXHRcdGV4cGFuZEljb24uY2xhc3NMaXN0LmFkZChcIm5lb3MtdHJlZS1leHBhbmRlclwiKTtcblx0XHRyZXR1cm4gZXhwYW5kSWNvbjtcblx0fVxuXG5cdF93cmFwRWxlbWVudFdpdGhOb2RlVGl0bGUoZWxlbWVudCkge1xuXHRcdGNvbnN0IG5vZGVUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuXHRcdG5vZGVUaXRsZS5jbGFzc0xpc3QuYWRkKFwibmVvcy10cmVlLXRpdGxlXCIpO1xuXHRcdGVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZVRpdGxlLCBlbGVtZW50KTtcblx0XHRub2RlVGl0bGUuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG5cdH1cblxuXHRfaXNGb2xkZXIobm9kZSkge1xuXHRcdHJldHVybiAhaXNOaWwobm9kZSkgJiYgbm9kZS5jbGFzc0xpc3QuY29udGFpbnMoXCJuZW9zLXRyZWUtZm9sZGVyXCIpO1xuXHR9XG5cblx0X3RvZ2dsZShub2RlKSB7XG5cdFx0bm9kZS5jbGFzc0xpc3QudG9nZ2xlKFwibmVvcy10cmVlLW9wZW5cIik7XG5cdFx0dGhpcy5fY2hhbmdlVHJlZUJyYW5jaFN0YXRlKFxuXHRcdFx0bm9kZS5nZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiKSxcblx0XHRcdG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwibmVvcy10cmVlLW9wZW5cIilcblx0XHQpO1xuXHR9XG5cblx0X2dldFBhdGhGb3JUeXBlKCkge1xuXHRcdGNvbnN0IHBhdGggPSBWQUxVRV9QQVRIICsgKCFpc0VtcHR5KHRoaXMuX3R5cGUpID8gXCIuXCIgKyB0aGlzLl90eXBlIDogXCJcIik7XG5cdFx0cmV0dXJuIHBhdGgudG9Mb3dlckNhc2UoKTtcblx0fVxuXG5cdF9sb2FkVHJlZUJyYW5jaFN0YXRlcyhpbml0KSB7XG5cdFx0Y29uc3QgcGF0aFdpdGhUeXBlID0gdGhpcy5fZ2V0UGF0aEZvclR5cGUoKTtcblx0XHRjb25zdCBzdG9yYWdlRGF0YSA9IGxvYWRTdG9yYWdlRGF0YShwYXRoV2l0aFR5cGUsIFtdKTtcblx0XHRpZiAoIWlzTmlsKGluaXQpICYmIGluaXQgPT09IHRydWUpIHtcblx0XHRcdHRoaXMuX2luaXRpYWxpemVUcmVlU3RhdGUoc3RvcmFnZURhdGEpO1xuXHRcdH1cblxuXHRcdHRoaXMuX3RyZWVCcmFuY2hTdGF0ZXMgPSBBcnJheS5pc0FycmF5KHN0b3JhZ2VEYXRhKSA/IHN0b3JhZ2VEYXRhIDogW107XG5cdFx0cmV0dXJuIHRoaXMuX3RyZWVCcmFuY2hTdGF0ZXM7XG5cdH1cblxuXHRfc2F2ZVRyZWVCcmFuY2hTdGF0ZXMoKSB7XG5cdFx0Y29uc3QgcGF0aFdpdGhUeXBlID0gdGhpcy5fZ2V0UGF0aEZvclR5cGUoKTtcblx0XHRpZiAoQXJyYXkuaXNBcnJheSh0aGlzLl90cmVlQnJhbmNoU3RhdGVzKSkge1xuXHRcdFx0c2F2ZVN0b3JhZ2VEYXRhKHBhdGhXaXRoVHlwZSwgdGhpcy5fdHJlZUJyYW5jaFN0YXRlcyk7XG5cdFx0fVxuXHR9XG5cblx0X2NoYW5nZVRyZWVCcmFuY2hTdGF0ZShwYXRoKSB7XG5cdFx0aWYgKGlzRW1wdHkocGF0aCkgfHwgIUFycmF5LmlzQXJyYXkodGhpcy5fdHJlZUJyYW5jaFN0YXRlcykpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5fdHJlZUJyYW5jaFN0YXRlcy5pbmNsdWRlcyhwYXRoKSkge1xuXHRcdFx0dGhpcy5fdHJlZUJyYW5jaFN0YXRlcyA9IHRoaXMuX3RyZWVCcmFuY2hTdGF0ZXMuZmlsdGVyKFxuXHRcdFx0XHRpdGVtID0+IGl0ZW0gIT09IHBhdGhcblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX3RyZWVCcmFuY2hTdGF0ZXMucHVzaChwYXRoKTtcblx0XHR9XG5cblx0XHR0aGlzLl9zYXZlVHJlZUJyYW5jaFN0YXRlcygpO1xuXHR9XG59XG4iLCJpbXBvcnQge0Ryb3BEb3duTWVudSwgTWVudVBhbmVsfSBmcm9tICcuL0NvbXBvbmVudHMvVG9wQmFyJ1xuaW1wb3J0IFRyZWUgZnJvbSAnLi9Db21wb25lbnRzL1RyZWUnXG5cbmNvbnN0IGRyb3BEb3duTWVudUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5lb3MtdXNlci1tZW51Jyk7XG5kcm9wRG93bk1lbnVFbGVtZW50cy5mb3JFYWNoKGRyb3BEb3duRWxlbWVudCA9PiB7XG5cdG5ldyBEcm9wRG93bk1lbnUoZHJvcERvd25FbGVtZW50KTtcbn0pO1xuXG5jb25zdCBtZW51UGFuZWxFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uZW9zLW1lbnUnKTtcbm1lbnVQYW5lbEVsZW1lbnRzLmZvckVhY2gocGFuZWxFbGVtZW50ID0+IHtcblx0bmV3IE1lbnVQYW5lbChwYW5lbEVsZW1lbnQpO1xufSk7XG5cbmNvbnN0IHRyZWVFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uZW9zLXRyZWUtY29udGFpbmVyJyk7XG50cmVlRWxlbWVudHMuZm9yRWFjaCh0cmVlRWxlbWVudCA9PiB7XG5cdG5ldyBUcmVlKHRyZWVFbGVtZW50KTtcbn0pO1xuXG5cbiJdLCJzb3VyY2VSb290IjoiIn0=