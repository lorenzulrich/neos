`2.1.4 (2016-03-16) <https://github.com/neos/neos-development-collection/releases/tag/2.1.4>`_
==============================================================================================

Overview of merged pull requests
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`TASK: Missing translatable labels <https://github.com/neos/neos-development-collection/pull/387>`_
---------------------------------------------------------------------------------------------------

NEOS-1064 #close
NEOS-1499

* Packages: ``Neos``

`TASK: Document baseNodeType setting for node tree <https://github.com/neos/neos-development-collection/pull/398>`_
-------------------------------------------------------------------------------------------------------------------

* Packages: ``Neos``

`BUGFIX: Reset \`\`backendOptions\`\` for TypoScript content cache in testing context <https://github.com/neos/neos-development-collection/pull/383>`_
------------------------------------------------------------------------------------------------------------------------------------------------------

Fixes a bug that occurs if there is a custom configuration for ``TYPO3_TypoScript_Content`` cache with ``backendOptions`` set. This fix will unset the ``backendOptions`` in testing context which are not allowed for the ``TYPO3\\Flow\\Cache\\Backend\TransientMemoryBackend`` backend.

NEOS-1781 #close

* Packages: ``TypoScript``

`BUGFIX: Translate process is broken for dimensions without fallbacks <https://github.com/neos/neos-development-collection/pull/392>`_
--------------------------------------------------------------------------------------------------------------------------------------

This fixes an issue for sites with single or multiple dimensions which
have no fallback defined. When trying to translate content from an
existing dimension to a variant which does not exist yet, the
`NodesController` will fail with a fatal error due to the missing
Site Node in the respective dimension.

The solution in this change works for the given situation. A more
generic approach may be implemented as part of #156.

NEOS-1786 #close

* Packages: ``Neos``

`TASK: Document predefined roles in Neos <https://github.com/neos/neos-development-collection/pull/379>`_
---------------------------------------------------------------------------------------------------------

Documents the roles that are defined in Neos and how to extend them.

* Packages: ``Neos``

`TASK: Incorrect label id for users module widget action button title <https://github.com/neos/neos-development-collection/pull/390>`_
--------------------------------------------------------------------------------------------------------------------------------------

NEOS-1536

* Packages: ``Neos``

`BUGFIX: Additional styles for modules loaded after Neos <https://github.com/neos/neos-development-collection/pull/384>`_
-------------------------------------------------------------------------------------------------------------------------

Via `additionalResources.styleSheets` a map of additional
stylesheet files can be defined that are loaded in the module
the configuration was made for. Unfortunately they were loaded
before the Neos default styles which makes overwriting of some of
those styles cumbersome and more difficult than necessary.

This change switches the loading order so that the Neos styles
are loaded before any additional resources.

* Packages: ``Neos``

`BUGFIX: Translate title attribute on module widget action buttons <https://github.com/neos/neos-development-collection/pull/386>`_
-----------------------------------------------------------------------------------------------------------------------------------

Enables translation of the title attribute used for action buttons in module widgets.

NEOS-1536 #close

* Packages: ``Neos``

`TASK: Migration adjustments <https://github.com/neos/neos-development-collection/pull/382>`_
---------------------------------------------------------------------------------------------

This merges changes from 1.2 into 2.0 and follows up with some needed
adjustments.

* Packages: ``Media`` ``Neos`` ``TYPO3CR``

`TASK: Adjust some leftovers related to TYPO3CR PostgreSQL schema <https://github.com/neos/neos-development-collection/pull/380>`_
----------------------------------------------------------------------------------------------------------------------------------

Drops the default value for pathhash and renames one index.

* Packages: ``TYPO3CR``

`BUGFIX: Adjust index names to match Doctrine DBAL 2.5 <https://github.com/neos/neos-development-collection/pull/369>`_
-----------------------------------------------------------------------------------------------------------------------

The use of Doctrine 2.5 (instead of 2.4) exposes the fact that some
(old) index names in the Neos database schema do not match the names
that are generated currently.

This adjusts those index names, something that is a one-time adjustment.

* Packages: ``Neos`` ``TYPO3CR``

`BUGFIX: Translate dimension label in dimension choice dialog <https://github.com/neos/neos-development-collection/pull/373>`_
------------------------------------------------------------------------------------------------------------------------------

The demo site specifies an i18n label but the implementation didn't use
any client-side translation for the dimension label yet.

* Packages: ``Neos``

`BUGFIX: Fix issues with PostgreSQL migrations <https://github.com/neos/neos-development-collection/pull/370>`_
---------------------------------------------------------------------------------------------------------------

This fixes issues when migrating to 2.1 that affect some, but not all, running PostgreSQL:

- JSON to JSONB column type change not possible
- column type change on event log not possible

NEOS-1763 #close

* Packages: ``Neos``

`BUGFIX: Content Collection nodes vanish when publishing to nested workspace <https://github.com/neos/neos-development-collection/pull/372>`_
---------------------------------------------------------------------------------------------------------------------------------------------

This fixes an issue with the publishing mechanism which can result in
removed Content Collection nodes when documents are published to a
workspace other than the live workspace.

The root cause for this issue is that during publishing Neos will publish
Content Collection nodes twice (the first time because they may exist
in the personal workspace and the second time because all Content
Collection nodes are published automatically when a Document node is
published). Because the workspace of the Content Collection node is
changed to the target workspace on the first publish iteration, the
source and target workspace will be the same on the second publish
iteration. That results in `replaceNodeData()` to remove the "existing"
Content Collection node, which is actually the very same object like
the "new" one.

NEOS-1769 #resolve

* Packages: ``Neos`` ``TYPO3CR``

`TASK: Document \`\`label\`\` option for NodeTypes.yaml <https://github.com/neos/neos-development-collection/pull/366>`_
------------------------------------------------------------------------------------------------------------------------

Adds documentation on how to customize the generated label for nodes.

* Packages: ``Neos``

`BUGFIX: Fix ObjectAccess to overriden expression value in Fluid proxy <https://github.com/neos/neos-development-collection/pull/365>`_
---------------------------------------------------------------------------------------------------------------------------------------

This will check for an overriden value when using object access in a
Fluid template on a TypoScript path proxy.

NEOS-1776 #close Fixes the issue

* Packages: ``TypoScript``

`BUGFIX: Node property can be null in removeProperty <https://github.com/neos/neos-development-collection/pull/357>`_
---------------------------------------------------------------------------------------------------------------------

The ``AbstractNodeData::removeProperty()`` method checked
the existence of the given property with ``isset`` but that
leads to an exception if the property has a ``null`` value.
The check has been changed to ``array_key_exists``.

NEOS-1719 #close

* Packages: ``TYPO3CR``

`TASK: Add hint about enabling the event logging <https://github.com/neos/neos-development-collection/pull/360>`_
-----------------------------------------------------------------------------------------------------------------

* Packages: ``Neos``

`TASK: Replace "TYPO3 Neos" by "Neos" in documentation <https://github.com/neos/neos-development-collection/pull/361>`_
-----------------------------------------------------------------------------------------------------------------------

* Packages: ``Neos``

`BUGFIX: Fix link to Flow documentation <https://github.com/neos/neos-development-collection/pull/359>`_
--------------------------------------------------------------------------------------------------------

* Packages: ``Neos``

`BUGFIX: Fix broken link tag in link node view helper docblock <https://github.com/neos/neos-development-collection/pull/358>`_
-------------------------------------------------------------------------------------------------------------------------------

* Packages: ``Neos``

`BUGFIX: Fixed a typo in \`\`_InlineEditing.scss\`\` <https://github.com/neos/neos-development-collection/pull/353>`_
---------------------------------------------------------------------------------------------------------------------

The css property ``inline-offset`` doesn't exist, it should be
``outline-offset``.

* Packages: ``Neos``

`BUGFIX: Missing breadcrumb node variant calculation more robust <https://github.com/neos/neos-development-collection/pull/354>`_
---------------------------------------------------------------------------------------------------------------------------------

The calculation of missing node variants along the breadcrumb to
the site root is used for the translation "helper" in the Neos UI.
The old calculation depended on a lot of implicit knowledge about
nodes and paths, all this was refactored to use appropriate methods
available resulting in a more robust implementation that will never
return a value lower or equal 0.

* Packages: ``Neos``

`TASK: Workspace review module respects datetime properties <https://github.com/neos/neos-development-collection/pull/350>`_
----------------------------------------------------------------------------------------------------------------------------

Workspace review module will show changes for node properties of type DateTime.

NEOS-1771 #close

* Packages: ``Neos``

`TASK: Tweak PolicyConfigurationEnrichmentAspect <https://github.com/neos/neos-development-collection/pull/352>`_
-----------------------------------------------------------------------------------------------------------------

This adds a safeguard and some type hints to the aspect.

* Packages: ``Neos``

`BUGFIX: Corrected \\\ to \\ in Security Document <https://github.com/neos/neos-development-collection/pull/347>`_
----------------------------------------------------------------------------------------------------------------

Otherwise following error appears:

    #1355480641: PHP Fatal error: Class  
    'TYPO3\\\TYPO3CR\\\Security\\\Authorization\\\Privilege\\\Node\\\ReadNodePrivilege' not found 
    in /var/www/Neos/Packages/Framework/TYPO3.Flow/Classes/TYPO3/Flow/Security/Authorization/Privilege/PrivilegeTarget.php on line 136

* Packages: ``Neos``

`BUGFIX: Fixed typos and headline in documentation <https://github.com/neos/neos-development-collection/pull/344>`_
-------------------------------------------------------------------------------------------------------------------

* Packages: ``Neos``

`BUGFIX: date renamed in DateTime <https://github.com/neos/neos-development-collection/pull/345>`_
--------------------------------------------------------------------------------------------------

"date" isn't working anymore, but "DateTime" does.

* Packages: ``Neos``

`BUGFIX: Use correct apostrophe in example <https://github.com/neos/neos-development-collection/pull/346>`_
-----------------------------------------------------------------------------------------------------------

* Packages: ``Neos``

`TASK: EEL defaultContext contains request Object too <https://github.com/neos/neos-development-collection/pull/340>`_
----------------------------------------------------------------------------------------------------------------------

Added info about the request object in the EEL defaultContext

* Packages: ``Neos``

`BUGFIX: Remove site logic from parentsUntil operation <https://github.com/neos/neos-development-collection/pull/319>`_
-----------------------------------------------------------------------------------------------------------------------

There is site logic within the parentsUntil operation inside the TYPO3.CR package. There is a seperate operation especially for Neos now.

NEOS-1628 #close

* Packages: ``Neos`` ``TYPO3CR``

`BUGFIX: Remove site logic from parents operation <https://github.com/neos/neos-development-collection/pull/318>`_
------------------------------------------------------------------------------------------------------------------

There is site logic within the parents operation inside the TYPO3.CR package. There is a seperate operation especially for Neos now.

NEOS-1628 #resolve

* Packages: ``Neos``

`Detailed log <https://github.com/neos/neos-development-collection/compare/2.1.3...2.1.4>`_
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
